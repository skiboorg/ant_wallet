"use strict";(globalThis["webpackChunkant_wallet"]=globalThis["webpackChunkant_wallet"]||[]).push([[685],{14685:(e,a,t)=>{t.r(a),t.d(a,{default:()=>xe});t(72879);var l=t(59835),s=t(60499),n=t(86970),d=t(32743),o=t(76028),i=t(43463),u=t(46190),c=t(23459),m=t(28339);const r={style:{"max-width":"90%"},class:"ellipsis"},w={style:{"max-width":"100%"},class:"ellipsis"},p={style:{"max-width":"90%"},class:"ellipsis"},_={style:{"word-break":"break-all"},class:""},g={props:["transactionInfo"]},v=Object.assign(g,{__name:"TransactionInfo",setup(e){const a=(0,i.s)();return(t,d)=>{const o=(0,l.up)("q-item-section"),i=(0,l.up)("q-item"),u=(0,l.up)("q-badge"),c=(0,l.up)("q-list"),m=(0,l.up)("q-card-section"),g=(0,l.up)("q-card"),v=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(v,{modelValue:(0,s.SU)(a).transactionInfoModalVisible,"onUpdate:modelValue":d[0]||(d[0]=e=>(0,s.SU)(a).transactionInfoModalVisible=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"bg-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{dense:"",separator:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{class:"text-bold"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.$t("transaction"))+" #"+(0,n.zw)(e.transactionInfo.seqNo),1)])),_:1})])),_:1}),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{side:"",class:"text-weight-medium text-dark"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.$t("date")),1)])),_:1}),(0,l.Wm)(o,{class:"text-caption"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.transactionInfo.fullDate),1)])),_:1})])),_:1}),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{side:"",class:"text-weight-medium text-dark"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.$t("creator")),1)])),_:1}),(0,l.Wm)(o,{class:"text-caption"},{default:(0,l.w5)((()=>[(0,l._)("span",r,(0,n.zw)(e.transactionInfo.creator),1),(0,l.Uk)(" "+(0,n.zw)(e.transactionInfo.creator_name?`${e.transactionInfo.creator_name}`:""),1)])),_:1})])),_:1}),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{side:"",class:"text-weight-medium text-dark"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.$t("confirms")),1)])),_:1}),(0,l.Wm)(o,{class:"text-caption"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.transactionInfo.confirmations),1)])),_:1})])),_:1}),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{side:"",class:"text-weight-medium text-dark"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.$t("size")),1)])),_:1}),(0,l.Wm)(o,{class:"text-caption"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.transactionInfo.size),1)])),_:1})])),_:1}),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{side:"",class:"text-weight-medium text-dark"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.$t("singnature")),1)])),_:1}),(0,l.Wm)(o,{class:"text-caption"},{default:(0,l.w5)((()=>[(0,l._)("span",w,(0,n.zw)(e.transactionInfo.signature),1)])),_:1})])),_:1}),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{side:"",class:"text-weight-medium text-dark"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.$t("send_asset_recipient")),1)])),_:1}),(0,l.Wm)(o,{class:"text-caption"},{default:(0,l.w5)((()=>[(0,l._)("span",p,(0,n.zw)(e.transactionInfo.recipient),1),(0,l.Uk)(" "+(0,n.zw)(e.transactionInfo.recipient_name?`${e.transactionInfo.recipient_name}`:""),1)])),_:1})])),_:1}),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{side:"",class:"text-weight-medium text-dark"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.$t("amount")),1)])),_:1}),(0,l.Wm)(o,{class:"text-caption"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.transactionInfo.amount)+" "+(0,n.zw)(e.transactionInfo.asset_name),1)])),_:1})])),_:1}),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{side:"",class:"text-weight-medium text-dark"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.$t("status")),1)])),_:1}),(0,l.Wm)(o,{class:"text-caption"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{color:"positive","text-color":"white",style:{width:"30%"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.$t("done")),1)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(i,{class:"no-padding bg-grey-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{side:"",class:"text-weight-medium text-dark"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.$t("all_data")),1)])),_:1})])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.transactionInfo,((e,a)=>((0,l.wg)(),(0,l.j4)(i,{class:"no-padding",key:a},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{side:"",class:"text-weight-medium text-dark"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a),1)])),_:2},1024),(0,l.Wm)(o,{class:"text-caption"},{default:(0,l.w5)((()=>[(0,l._)("span",_,(0,n.zw)(e),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}});var f=t(32074),k=t(44458),x=t(63190),W=t(13246),b=t(490),y=t(76749),z=t(20990),U=t(69984),q=t.n(U);const h=v,I=h;q()(v,"components",{QDialog:f.Z,QCard:k.Z,QCardSection:x.Z,QList:W.Z,QItem:b.Z,QItemSection:y.Z,QBadge:z.Z});var Z=t(61957),$=(t(87270),t(4682)),Q=t(76647),V=(t(98030),t(17779));const S=(0,l._)("div",{class:"",style:{height:"50px"}},null,-1),F={class:"text-bold q-mb-none"},C={key:0},H={class:"no-margin"},j={class:"text-bold"},A={class:"no-margin"},M={class:"text-bold"},D={class:"no-margin"},T={class:"text-bold"},B={id:"video-container"},L=(0,l._)("video",{id:"qr-video"},null,-1),P=[L],E={class:"text-bold q-mb-none"},N={key:1},K={__name:"SendAssetModal",props:{asset:Object},emits:["close"],setup(e,{emit:a}){(0,Q.QT)();const d=(0,i.s)(),{EraChain:o}=((0,m.tv)(),t(99407)),r=(0,u.c)(),w=(0,c.Q)(),p=(0,s.iH)(!1),_=(0,s.iH)(!1),g=(0,s.iH)(!1);let v=null;const f=(0,l.Fl)((()=>r.balances)),k=((0,l.Fl)((()=>r.verifyPersonData)),(0,l.Fl)((()=>parseFloat(.001*parseFloat(q.value.amount)).toFixed(8)))),x=(0,l.Fl)((()=>q.value.amount&&parseFloat(q.value.amount)>0)),W=(0,l.Fl)((()=>parseFloat(parseFloat(q.value.amount)+parseFloat(k.value)).toFixed(8))),b=(0,l.Fl)((()=>{let e=f.value[z.asset.key][0][1]>=parseFloat(W.value);return e&&q.value.address&&g.value}));async function y(){_.value=!0;const e=document.getElementById("qr-video");V.log(e);const a=new $.Z(e,(e=>{V.log("decoded qr code:",e);try{q.value.address=e.data.split(":")[0],q.value.amount=e.data.split(":")[2],_.value=!1,a.stop()}catch(t){_.value=!1,a.stop()}}),{});v=a,await a.start()}const z=e,U=a,q=(0,s.iH)({amount:"",address:"",title:"",message:"",encrypted:!1,fee:0,raw:0});function h(){q.value={amount:"",address:"",title:"",message:"",encrypted:!0,fee:0,raw:0}}const I=async()=>{p.value=!p.value;const e=await w.getFee(z.asset.key,q.value.amount,q.value.address,q.value.title?q.value.title:"",q.value.message?q.value.message:"");if(e.success){await w.signTransaction(e.raw);d.toggleSendAssetModalVisible()}p.value=!p.value};function L(){h(),v&&v.stop(),U("close")}return(a,t)=>{const o=(0,l.up)("q-item-section"),i=(0,l.up)("q-item"),u=(0,l.up)("q-input"),c=(0,l.up)("q-btn"),m=(0,l.up)("q-separator"),r=(0,l.up)("q-checkbox"),w=(0,l.up)("btn"),v=(0,l.up)("q-list"),z=(0,l.up)("q-card-section"),U=(0,l.up)("q-card"),h=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(h,{modelValue:(0,s.SU)(d).sendAssetModalVisible,"onUpdate:modelValue":t[5]||(t[5]=e=>(0,s.SU)(d).sendAssetModalVisible=e),class:(0,n.C_)({hidden:(0,s.SU)(d).isPageHidden}),onBeforeHide:L},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"bg-white",style:{width:"700px","max-width":"100vw"}},{default:(0,l.w5)((()=>[S,(0,l.Wm)(z,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l._)("p",F,(0,n.zw)(a.$t("main_info")),1),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{class:"text-weight-medium text-dark"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.$t("send_asset_amount")),1)])),_:1})])),_:1}),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{dense:"",outlined:"",type:"number",modelValue:q.value.amount,"onUpdate:modelValue":t[0]||(t[0]=e=>q.value.amount=e)},null,8,["modelValue"])])),_:1})])),_:1}),x.value?((0,l.wg)(),(0,l.iD)("div",C,[(0,l._)("p",H,[(0,l.Uk)("Ваш баланс: "),(0,l._)("span",j,(0,n.zw)(f.value[e.asset.key][0][1])+" "+(0,n.zw)(e.asset.name),1)]),(0,l._)("p",A,[(0,l.Uk)("Комиссия сети за перевод составит: "),(0,l._)("span",M,(0,n.zw)(k.value)+" "+(0,n.zw)(e.asset.name)+" + газ 0.00035644 ANT",1)]),(0,l._)("p",D,[(0,l.Uk)("Итого сумма перевода составит: "),(0,l._)("span",T,(0,n.zw)(W.value)+" "+(0,n.zw)(e.asset.name),1)])])):(0,l.kq)("",!0),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{class:"text-weight-medium text-dark"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.$t("receiver_wallet")),1)])),_:1}),(0,l.Wm)(o,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{size:"18px","text-color":"dark",unelevated:"",icon:"las la-qrcode",onClick:y})])),_:1})])),_:1}),(0,l.wy)((0,l._)("div",B,P,512),[[Z.F8,_.value]]),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{dense:"",outlined:"",modelValue:q.value.address,"onUpdate:modelValue":t[1]||(t[1]=e=>q.value.address=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.Wm)(m,{class:"q-my-md"}),(0,l._)("p",E,(0,n.zw)(a.$t("send_asset_message")),1),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{class:"text-weight-medium text-dark"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.$t("send_asset_message_title")),1)])),_:1})])),_:1}),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{dense:"",outlined:"",modelValue:q.value.title,"onUpdate:modelValue":t[2]||(t[2]=e=>q.value.title=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{class:"text-weight-medium text-dark"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.$t("send_asset_message_body")),1)])),_:1})])),_:1}),(0,l.Wm)(i,{class:"no-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"textarea",dense:"",outlined:"",modelValue:q.value.message,"onUpdate:modelValue":t[3]||(t[3]=e=>q.value.message=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.Wm)(m,{class:"q-my-md"}),W.value>0?((0,l.wg)(),(0,l.iD)("div",N,[(0,l.Wm)(r,{color:"dark",class:"text-negative text-bold q-mb-md",modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=e=>g.value=e),label:"Я подтверждаю, что адрес получателя указан верно, в противном случае произойдет безвозвратная потеря перевода"},null,8,["modelValue"]),(0,l.Wm)(w,{loading:p.value,label:`Отправить ${W.value} ${e.asset.name}`,onClick:I,disabled:!b.value,outline:!1},null,8,["loading","label","disabled"])])):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","class"])}}};var O=t(13119),Y=t(24455),R=t(50926),X=t(91006);const G=K,J=G;q()(K,"components",{QDialog:f.Z,QCard:k.Z,QCardSection:x.Z,QList:W.Z,QItem:b.Z,QItemSection:y.Z,QInput:O.Z,QBtn:Y.Z,QSeparator:R.Z,QCheckbox:X.Z});var ee=t(17779);const ae={class:"container"},te={class:"text-center"},le=["src"],se={class:"text-center"},ne={class:"q-gutter-md"},de={class:""},oe={class:"flex items-center justify-between q-pa-md"},ie={class:"q-mb-none"},ue={class:"asset-date q-pa-md bg-grey-2 q-mb-none"},ce={style:{"max-width":"70%"},class:"ellipsis inline-block"},me={key:0,class:"text-center q-pa-md"},re={components:{TransactionInfo:I,SendAssetModal:J}},we=Object.assign(re,{__name:"Asset",setup(e){const a=(0,i.s)(),t=(0,u.c)(),r=(0,c.Q)(),w=(0,m.yj)(),p="https://web.antex.pro";let _=(0,s.iH)(0),g=(0,s.iH)({}),v=(0,s.iH)([]),f=(0,s.iH)(!1),k=((0,s.iH)(!1),(0,s.iH)(0));const x=(0,l.Fl)((()=>t.addresses[t.currentAddressIdx].address)),W=(0,l.Fl)((()=>d.ZP.isEmpty(v.value))),b=(0,l.Fl)((()=>t.assets[_.value])),y=((0,l.Fl)((()=>r.assets)),(0,l.Fl)((()=>t.balances[b.value.key][0][1]))),z=(0,l.Fl)((()=>y.value*b.value.course_api));async function U(e,a){f.value=!f.value;const t=await(0,o.sg)(x.value,b.value.key,e,a);v.value=d.ZP.groupBy(t,"timestamp"),f.value=!f.value}async function q(){k.value+=50,await U(50,k.value)}return(0,l.bv)((async()=>{_.value=w.params.asset_key,ee.log(b.value),await U(50,k.value)})),(e,t)=>{const d=(0,l.up)("q-avatar"),o=(0,l.up)("btn"),i=(0,l.up)("q-icon"),u=(0,l.up)("q-item-section"),c=(0,l.up)("q-item-label"),m=(0,l.up)("q-item"),r=(0,l.up)("q-list"),w=(0,l.up)("q-card-section"),_=(0,l.up)("q-card"),h=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(h,{padding:""},{default:(0,l.w5)((()=>[(0,l._)("div",ae,[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l._)("div",te,[(0,l.Wm)(d,{size:"50px",class:"q-mr-md"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:(0,s.SU)(p)+b.value.iconURL,alt:""},null,8,le)])),_:1})]),(0,l._)("div",se,[(0,l._)("p",{class:(0,n.C_)(["text-bold text-h6 text-dark no-margin text-gold-gradient",{blur:e.$global.isBlur}])},(0,n.zw)(y.value)+" "+(0,n.zw)(b.value.name),3),(0,l._)("p",{class:(0,n.C_)(["text-weight-medium text-body1 text-dark text-gold-gradient",{blur:e.$global.isBlur}])},"~ "+(0,n.zw)(e.$filters.convertAmount(z.value))+" $",3),(0,l._)("div",ne,[(0,l.Wm)(o,{label:"Перевести в сети ANTEX",classes:"",color:"white",icon:"login",onClick:t[0]||(t[0]=e=>(0,s.SU)(a).toggleSendAssetModalVisible())}),(0,l.Wm)(o,{label:"Вывести в другую сеть",classes:"",color:"positive","text-color":"white",icon:"logout",onClick:t[1]||(t[1]=a=>e.$router.push(`/wallet/assets/withdraw/${b.value.key}`))})])]),(0,l._)("div",de,[(0,l._)("div",oe,[(0,l._)("p",ie,(0,n.zw)(e.$t("transaction_history")),1),(0,l.Wm)(i,{onClick:t[2]||(t[2]=e=>((0,s.dq)(k)?k.value=0:k=0,U(50,(0,s.SU)(k)))),name:"las la-sync",color:"primary",size:"26px",class:(0,n.C_)({rotate:(0,s.SU)(f)})},null,8,["class"])]),(0,l.Wm)(r,{separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(v),((t,d)=>((0,l.wg)(),(0,l.iD)("div",{class:"",key:d},[(0,l._)("p",ue,(0,n.zw)(d),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t,((t,d)=>((0,l.wg)(),(0,l.j4)(m,{clickable:"",onClick:e=>((0,s.dq)(g)?g.value=t:g=t,(0,s.SU)(a).toggleTransactionInfoModalVisible()),key:d},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{avatar:""},{default:(0,l.w5)((()=>[x.value!==t.creator&&1===Math.sign(t.amount)?((0,l.wg)(),(0,l.j4)(i,{key:0,color:"positive",name:"arrow_downward"})):((0,l.wg)(),(0,l.j4)(i,{key:1,color:"negative",name:"arrow_upward"}))])),_:2},1024),(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[t.message?((0,l.wg)(),(0,l.j4)(c,{key:0,overline:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.message),1)])),_:2},1024)):((0,l.wg)(),(0,l.j4)(c,{key:1,overline:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.actionName),1)])),_:2},1024)),(0,l.Wm)(c,{caption:""},{default:(0,l.w5)((()=>[(0,l._)("span",ce,(0,n.zw)(x.value!==t.creator&&1===Math.sign(t.amount)?e.$t("from"):e.$t("to"))+" "+(0,n.zw)(x.value!==t.creator&&1===Math.sign(t.amount)?t.creator:t.recipient),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(u,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(parseFloat(t.amount).toFixed(4)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])))),128))])),_:1}),W.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",me,[(0,l.Wm)(o,{color:"primary",label:"Загрузить еще",classes:"",loading:(0,s.SU)(f),"no-caps":"",outline:"",icon:"add",onClick:q},null,8,["loading"])]))])])),_:1})])),_:1})]),(0,l.Wm)((0,s.SU)(I),{"transaction-info":(0,s.SU)(g)},null,8,["transaction-info"]),(0,l.Wm)((0,s.SU)(J),{asset:b.value,onClose:t[3]||(t[3]=e=>U(50,0))},null,8,["asset"])])),_:1})}}});var pe=t(11639),_e=t(69885),ge=t(61357),ve=t(22857),fe=t(33115);const ke=(0,pe.Z)(we,[["__scopeId","data-v-45b1068a"]]),xe=ke;q()(we,"components",{QPage:_e.Z,QCard:k.Z,QCardSection:x.Z,QAvatar:ge.Z,QIcon:ve.Z,QList:W.Z,QItem:b.Z,QItemSection:y.Z,QItemLabel:fe.Z})}}]);