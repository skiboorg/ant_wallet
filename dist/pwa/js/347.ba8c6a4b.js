"use strict";(globalThis["webpackChunkant_wallet"]=globalThis["webpackChunkant_wallet"]||[]).push([[347],{79347:(e,l,a)=>{a.r(l),a.d(l,{default:()=>C});a(72879);var u=a(59835),t=a(86970),o=a(23459),s=a(46190),n=a(60499),p=a(31655),d=a(91569),m=a(87270),i=a(28339),c=a(17779);const r={class:"container"},_=(0,u._)("p",{class:"title"},"Оффер на покупку",-1),v=["src"],b={key:0},w={key:1},y={class:"text-caption"},k={key:0,class:"text-caption text-negative"},f={key:2},q={__name:"NewBuyOffer",setup(e){const l=(0,o.Q)(),q=(0,s.c)(),g=(0,n.iH)(null),V=(0,i.tv)();let W=a(24409);const $=(0,p.T)(),h=(0,n.iH)(null),Q=(0,n.iH)(null),F=(0,n.iH)(null),Z=(0,n.iH)(null),U=(0,n.iH)(null),x=((0,u.Fl)((()=>q.addresses[q.currentAddressIdx].address)),(0,u.Fl)((()=>$.user))),H=(0,u.Fl)((()=>W.orderBy(l.assets,["id"])));(0,u.Fl)((()=>q.balances));async function z(){c.log(h.value);const e=await d.h.post("/api/p2p/add_offer",{is_sell:!1,asset_key:h.value.key,wallet:x.value.wallet,amount:Q.value,min_amount:F.value,payment_types:g.value,course:Z.value,rules:U.value});e.data.success?(0,m.d$)("positive",e.data.message):(0,m.d$)("negative",e.data.message),await $.get_own_offers(),V.push({name:"p2p_index"})}return(e,l)=>{const a=(0,u.up)("q-avatar"),o=(0,u.up)("q-item-section"),s=(0,u.up)("q-item-label"),n=(0,u.up)("q-item"),p=(0,u.up)("q-select"),d=(0,u.up)("q-input"),m=(0,u.up)("q-btn"),i=(0,u.up)("q-card-section"),c=(0,u.up)("q-card"),q=(0,u.up)("q-page");return(0,u.wg)(),(0,u.j4)(q,{padding:""},{default:(0,u.w5)((()=>[(0,u._)("div",r,[_,(0,u.Wm)(c,null,{default:(0,u.w5)((()=>[(0,u.Wm)(i,null,{default:(0,u.w5)((()=>[(0,u.Wm)(p,{color:"dark",outlined:"",options:H.value.filter((e=>e.is_in_p2p)),modelValue:h.value,"onUpdate:modelValue":l[0]||(l[0]=e=>h.value=e),"option-label":"name",class:"q-mb-md",behavior:"menu",label:e.$t("p2p_select_asset_for_buy")},{option:(0,u.w5)((e=>[(0,u.Wm)(n,(0,t.vs)((0,u.F4)(e.itemProps)),{default:(0,u.w5)((()=>[(0,u.Wm)(o,{avatar:""},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{rounded:""},{default:(0,u.w5)((()=>[(0,u._)("img",{src:e.opt.icon},null,8,v)])),_:2},1024)])),_:2},1024),(0,u.Wm)(o,null,{default:(0,u.w5)((()=>[(0,u.Wm)(s,{class:"text-bold"},{default:(0,u.w5)((()=>[(0,u.Uk)((0,t.zw)(e.opt.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["options","modelValue","label"]),h.value?((0,u.wg)(),(0,u.iD)("div",b,[(0,u.Wm)(p,{color:"dark",outlined:"",options:x.value.payment_types,modelValue:g.value,"onUpdate:modelValue":l[1]||(l[1]=e=>g.value=e),"use-chips":"",class:"q-mb-md",behavior:"menu",multiple:"",label:e.$t("p2p_select_payment_system")},null,8,["options","modelValue","label"])])):(0,u.kq)("",!0),g.value&&g.value.length>0?((0,u.wg)(),(0,u.iD)("div",w,[(0,u.Wm)(d,{color:"dark",outlined:"",modelValue:Q.value,"onUpdate:modelValue":l[2]||(l[2]=e=>Q.value=e),class:"q-mb-md",type:"number",label:e.$t("p2p_select_volume")},null,8,["modelValue","label"]),(0,u.Wm)(d,{color:"dark",outlined:"",modelValue:F.value,"onUpdate:modelValue":l[3]||(l[3]=e=>F.value=e),class:"q-mb-md",type:"number",label:e.$t("p2p_select_volume_min")},null,8,["modelValue","label"]),(0,u._)("p",y,(0,t.zw)(e.$t("buy_amomunt_cource"))+": "+(0,t.zw)(h.value.course)+" RUB",1),parseFloat(h.value.p2p_min_buy_price)>0?((0,u.wg)(),(0,u.iD)("p",k,(0,t.zw)(e.$t("buy_min_cource"))+": "+(0,t.zw)(h.value.p2p_min_buy_price),1)):(0,u.kq)("",!0),(0,u.Wm)(d,{color:"dark",outlined:"",modelValue:Z.value,"onUpdate:modelValue":l[4]||(l[4]=e=>Z.value=e),class:"q-mb-md",type:"number",label:e.$t("p2p_select_course")},null,8,["modelValue","label"]),(0,u.Wm)(d,{color:"dark",outlined:"",modelValue:U.value,"onUpdate:modelValue":l[5]||(l[5]=e=>U.value=e),class:"q-mb-md",type:"textarea",label:e.$t("p2p_select_rules")},null,8,["modelValue","label"])])):(0,u.kq)("",!0),Q.value&&F.value&&Z.value?((0,u.wg)(),(0,u.iD)("div",f,[(0,u.Wm)(m,{dense:"",class:"full-width q-py-md",color:"positive","no-caps":"",unelevated:"",disable:!Q.value||parseFloat(F.value)>parseFloat(Q.value)||parseFloat(Z.value)<parseFloat(h.value.p2p_min_buy_price),onClick:z,label:`${e.$t("p2p_create_offer")} ${Q.value*Z.value} RUB`},null,8,["disable","label"])])):(0,u.kq)("",!0)])),_:1})])),_:1})])])),_:1})}}};var g=a(69885),V=a(44458),W=a(63190),$=a(10215),h=a(490),Q=a(76749),F=a(61357),Z=a(33115),U=a(13119),x=a(24455),H=a(69984),z=a.n(H);const B=q,C=B;z()(q,"components",{QPage:g.Z,QCard:V.Z,QCardSection:W.Z,QSelect:$.Z,QItem:h.Z,QItemSection:Q.Z,QAvatar:F.Z,QItemLabel:Z.Z,QInput:U.Z,QBtn:x.Z})}}]);