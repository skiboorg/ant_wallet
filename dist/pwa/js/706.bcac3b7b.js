"use strict";(globalThis["webpackChunkant_wallet"]=globalThis["webpackChunkant_wallet"]||[]).push([[706],{97706:(a,l,e)=>{e.r(l),e.d(l,{default:()=>I});var t=e(59835),u=e(86970),s=e(60499),n=e(46190),i=e(31655),d=e(23459),o=(e(87270),e(91569)),w=e(17779);const c={class:"container"},r=(0,t._)("p",{class:"title"},"Стейкинг",-1),p={key:0},m={class:"subtitle text-dark"},_={key:0,class:"q-mb-md"},v={class:"no-margin"},g={class:"text-bold"},k={class:"no-margin"},b={class:"text-bold"},f={key:1},F=(0,t._)("p",{class:"subtitle text-dark"},"Баланс стейкинга",-1),W={key:0},T={key:1},q={__name:"Index",setup(a){const l=(0,n.c)(),e=(0,i.T)(),q=(0,d.Q)(),h=(0,s.iH)(null),x=(0,s.iH)(!1),y=(0,t.Fl)((()=>l.balances)),L=(0,t.Fl)((()=>l.addresses[0].address)),U=(0,t.Fl)((()=>parseFloat(.001*parseFloat(h.value)).toFixed(8))),D=(0,t.Fl)((()=>h.value&&parseFloat(h.value)>0)),Q=(0,t.Fl)((()=>parseFloat(parseFloat(h.value)+parseFloat(U.value)).toFixed(8))),A=(0,t.Fl)((()=>y.value[1][0][1]>=parseFloat(Q.value)&&parseFloat(h.value)>=10)),z=async()=>{x.value=!x.value;const a=await q.getFee(1,h.value,"7JXmTnbwuDnpqQ3NwxwzhfGgDk223j13eP","Перевод","Перевод в стейкинг");if(w.log(a),a.success){const l=await q.signTransaction(a.raw);if(w.log(l),l.success){const a=await o.h.post("/api/p2p/new_stacking",{asset_key:1,wallet:L.value,amount:h.value,tx:l.result.signature});w.log(a),await e.get_user()}}},Z=async a=>{x.value=!x.value;const l=await o.h.post("/api/p2p/withdrawal_stacking",{id:a});w.log(l.data),await e.get_user(),x.value=!x.value};return(0,t.wF)((async()=>{await e.get_user()})),(a,l)=>{const n=(0,t.up)("q-input"),i=(0,t.up)("tx-btn"),d=(0,t.up)("q-card-section"),o=(0,t.up)("q-card"),w=(0,t.up)("q-item-label"),q=(0,t.up)("q-item-section"),L=(0,t.up)("btn"),C=(0,t.up)("q-item"),I=(0,t.up)("q-list"),S=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(S,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("div",c,[r,(0,t.Wm)(o,{class:"q-mb-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[y.value[1]?((0,t.wg)(),(0,t.iD)("div",p,[(0,t._)("p",m,"Ваш баланс: "+(0,u.zw)(y.value[1][0][1])+" ATL",1),(0,t.Wm)(n,{outlined:"","label-color":"dark",modelValue:h.value,"onUpdate:modelValue":l[0]||(l[0]=a=>h.value=a),label:"Объем переводимый в стейкинг (минимум 10 ATL)",class:"q-mb-md",type:"number"},null,8,["modelValue"]),D.value?((0,t.wg)(),(0,t.iD)("div",_,[(0,t._)("p",v,[(0,t.Uk)("Комиссия сети за перевод составит: "),(0,t._)("span",g,(0,u.zw)(U.value)+" ATL + газ 0.00035644 ANT",1)]),(0,t._)("p",k,[(0,t.Uk)("Итого сумма перевода составит: "),(0,t._)("span",b,(0,u.zw)(Q.value)+" ATL ",1)])])):(0,t.kq)("",!0),(0,t.Wm)(i,{label:"Отправить в стейкинг",loading:x.value,disabled:!A.value,onClick:z},null,8,["loading","disabled"])])):((0,t.wg)(),(0,t.iD)("div",f," У вас на балансе нет актива ATL. Воспользуйтесь P2P или биржей для его приобретения "))])),_:1})])),_:1}),(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[F,(0,s.SU)(e).user.staking.length>0?((0,t.wg)(),(0,t.iD)("div",W,[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,s.SU)(e).user.staking,(a=>((0,t.wg)(),(0,t.j4)(C,{key:a.id},{default:(0,t.w5)((()=>[(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)("Дата пополнения")])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(new Date(a.created_at).toLocaleDateString()),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)("Сумма пополнения")])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(a.amount)+" ATL - 5% = "+(0,u.zw)(a.to_stacking_amount)+" ATL",1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)("Доступно к выводу")])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(a.to_withdrawal)+" ATL",1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(q,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{label:"Вывести",loading:x.value,onClick:l=>Z(a.tx)},null,8,["loading","onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])):((0,t.wg)(),(0,t.iD)("div",T," Вы еще не переводили в стейкинг "))])),_:1})])),_:1})])])),_:1})}}};var h=e(69885),x=e(44458),y=e(63190),L=e(13119),U=e(13246),D=e(490),Q=e(76749),A=e(33115),z=e(69984),Z=e.n(z);const C=q,I=C;Z()(q,"components",{QPage:h.Z,QCard:x.Z,QCardSection:y.Z,QInput:L.Z,QList:U.Z,QItem:D.Z,QItemSection:Q.Z,QItemLabel:A.Z})}}]);