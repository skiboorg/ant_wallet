"use strict";(globalThis["webpackChunkant_wallet"]=globalThis["webpackChunkant_wallet"]||[]).push([[706],{97706:(a,l,e)=>{e.r(l),e.d(l,{default:()=>I});var t=e(59835),u=e(86970),s=e(60499),n=e(46190),i=e(31655),d=e(23459),o=e(43463),w=(e(87270),e(91569)),c=e(17779);const r={class:"container"},p=(0,t._)("p",{class:"title"},"Стейкинг",-1),m={key:0},g={class:"subtitle text-dark"},_={key:0,class:"q-mb-md"},v={class:"no-margin"},k={class:"text-bold"},b={class:"no-margin"},f={class:"text-bold"},F={key:1},W=(0,t._)("p",{class:"subtitle text-dark"},"Баланс стейкинга",-1),T={key:0},h={key:1},q={__name:"Index",setup(a){const l=(0,n.c)(),e=(0,i.T)(),q=(0,d.Q)(),x=(0,o.s)(),y=(0,s.iH)(null),L=(0,s.iH)(!1),U=(0,t.Fl)((()=>l.balances)),D=(0,t.Fl)((()=>l.addresses[0].address)),Q=(0,t.Fl)((()=>parseFloat(.001*parseFloat(y.value)).toFixed(8))),A=(0,t.Fl)((()=>y.value&&parseFloat(y.value)>0)),z=(0,t.Fl)((()=>parseFloat(parseFloat(y.value)+parseFloat(Q.value)).toFixed(8))),Z=(0,t.Fl)((()=>U.value[1][0][1]>=parseFloat(z.value)&&parseFloat(y.value)>=10)),C=async()=>{L.value=!L.value;const a=await q.getFee(1,y.value,"7JXmTnbwuDnpqQ3NwxwzhfGgDk223j13eP","Перевод","Перевод в стейкинг");if(c.log(a),a.success){const l=await q.signTransaction(a.raw);if(c.log(l),l.success){const a=await w.h.post("/api/p2p/new_stacking",{asset_key:1,wallet:D.value,amount:y.value,tx:l.result.signature});c.log(a),await x.getStats(),await e.get_user()}}},S=async a=>{L.value=!L.value;const l=await w.h.post("/api/p2p/withdrawal_stacking",{id:a});c.log(l.data),await e.get_user(),await x.getStats(),L.value=!L.value};return(0,t.wF)((async()=>{await e.get_user()})),(a,l)=>{const n=(0,t.up)("q-input"),i=(0,t.up)("tx-btn"),d=(0,t.up)("q-card-section"),o=(0,t.up)("q-card"),w=(0,t.up)("q-item-label"),c=(0,t.up)("q-item-section"),q=(0,t.up)("btn"),x=(0,t.up)("q-item"),D=(0,t.up)("q-list"),I=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(I,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("div",r,[p,(0,t.Wm)(o,{class:"q-mb-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[U.value[1]?((0,t.wg)(),(0,t.iD)("div",m,[(0,t._)("p",g,"Ваш баланс: "+(0,u.zw)(U.value[1][0][1])+" ATL",1),(0,t.Wm)(n,{outlined:"","label-color":"dark",modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=a=>y.value=a),label:"Объем переводимый в стейкинг (минимум 10 ATL)",class:"q-mb-md",type:"number"},null,8,["modelValue"]),A.value?((0,t.wg)(),(0,t.iD)("div",_,[(0,t._)("p",v,[(0,t.Uk)("Комиссия сети за перевод составит: "),(0,t._)("span",k,(0,u.zw)(Q.value)+" ATL + газ 0.00035644 ANT",1)]),(0,t._)("p",b,[(0,t.Uk)("Итого сумма перевода составит: "),(0,t._)("span",f,(0,u.zw)(z.value)+" ATL ",1)])])):(0,t.kq)("",!0),(0,t.Wm)(i,{label:"Отправить в стейкинг",loading:L.value,disabled:!Z.value,onClick:C},null,8,["loading","disabled"])])):((0,t.wg)(),(0,t.iD)("div",F," У вас на балансе нет актива ATL. Воспользуйтесь P2P или биржей для его приобретения "))])),_:1})])),_:1}),(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[W,(0,s.SU)(e).user.staking.length>0?((0,t.wg)(),(0,t.iD)("div",T,[(0,t.Wm)(D,{class:"withdrawal-list"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,s.SU)(e).user.staking,(a=>((0,t.wg)(),(0,t.j4)(x,{key:a.id,class:"withdrawal-item"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)("Дата пополнения")])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(new Date(a.created_at).toLocaleDateString()),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)("Сумма пополнения")])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(a.amount)+" ATL - 5% = "+(0,u.zw)(a.to_stacking_amount)+" ATL",1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)("Доступно к выводу")])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(a.to_withdrawal)+" ATL",1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(c,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{label:"Вывести",loading:L.value,onClick:l=>S(a.tx)},null,8,["loading","onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])):((0,t.wg)(),(0,t.iD)("div",h," Вы еще не переводили в стейкинг "))])),_:1})])),_:1})])])),_:1})}}};var x=e(69885),y=e(44458),L=e(63190),U=e(13119),D=e(13246),Q=e(490),A=e(76749),z=e(33115),Z=e(69984),C=e.n(Z);const S=q,I=S;C()(q,"components",{QPage:x.Z,QCard:y.Z,QCardSection:L.Z,QInput:U.Z,QList:D.Z,QItem:Q.Z,QItemSection:A.Z,QItemLabel:z.Z})}}]);