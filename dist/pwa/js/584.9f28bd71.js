"use strict";(globalThis["webpackChunkant_wallet"]=globalThis["webpackChunkant_wallet"]||[]).push([[584],{84584:(e,a,l)=>{l.r(a),l.d(a,{default:()=>N});var t=l(59835),u=l(86970),s=l(60499),n=l(76647),d=l(23459),o=l(46190),i=l(31655),w=l(91569),m=l(28339),r=l(87270);l(65054);const c={class:"container"},v={class:"title"},_={class:"subtitle text-dark"},k={class:"q-mb-md"},p={key:0},g={class:"text-bold text-negative"},f={key:0,class:"text-h6 text-bold"},b=(0,t._)("p",{class:"subtitle text-dark"},"История заявок на вывод",-1),W={key:0},U={key:1,class:"no-margin"},h={__name:"Withdraw",setup(e){(0,n.QT)();const a=(0,d.Q)(),l=(0,o.c)(),h=(0,i.T)(),q=(0,m.yj)(),y=(0,t.Fl)((()=>l.balances[Z.value.key][0][1]));let x=(0,s.iH)(!1),z=(0,s.iH)(0);const Q=(0,s.iH)({network:null,amount:null,to_address:null,agree:!1}),V=async()=>{x.value=!x.value;const e=await a.getFee(z.value,Q.value.amount,"7JXmTnbwuDnpqQ3NwxwzhfGgDk223j13eP","Вывод","");if(e.success){const l=await a.signTransaction(e.raw);if(l.success){const e=await w.h.post("/api/settings/new_withdrawal",{asset_key:z.value,wallet:D.value,network:Q.value.network,tx_hash:l.result.signature,to_address:Q.value.to_address,amount:Q.value.amount});e.data.success?((0,r.d$)("positive",JSON.stringify(e.data.message)),await h.get_user(),Q.value={network:null,amount:null,to_address:null,agree:!1},x.value=!x.value):(0,r.d$)("negative",JSON.stringify(e.data.message))}else(0,r.d$)("negative",JSON.stringify(response.data.message))}},Z=(0,t.Fl)((()=>a.assets.find((e=>e.key===z.value)))),D=(0,t.Fl)((()=>l.addresses[l.currentAddressIdx].address));return(0,t.wF)((async()=>{z.value=parseInt(q.params.asset_key),await h.get_user()})),(e,a)=>{const l=(0,t.up)("q-select"),n=(0,t.up)("q-input"),d=(0,t.up)("q-btn"),o=(0,t.up)("q-checkbox"),i=(0,t.up)("btn"),w=(0,t.up)("q-card-section"),m=(0,t.up)("q-card"),r=(0,t.up)("q-item-label"),q=(0,t.up)("q-item-section"),z=(0,t.up)("q-item"),D=(0,t.up)("q-list"),S=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(S,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("div",c,[(0,t._)("p",v,"Заявка на вывод "+(0,u.zw)(Z.value.name),1),(0,t.Wm)(m,{class:"q-mb-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t._)("p",_,"Доступный баланс для вывода "+(0,u.zw)(y.value)+" "+(0,u.zw)(Z.value.name),1),(0,t._)("div",k,[(0,t.Wm)(l,{options:Z.value.networks,outlined:"","label-color":"dark","option-label":"name",label:"Выберите сеть",modelValue:Q.value.network,"onUpdate:modelValue":a[0]||(a[0]=e=>Q.value.network=e)},null,8,["options","modelValue"])]),Q.value.network?((0,t.wg)(),(0,t.iD)("div",p,[(0,t.Wm)(n,{class:"q-mb-md",outlined:"","label-color":"dark",label:`Введите адрес получателя в сети ${Q.value.network?.name}`,modelValue:Q.value.to_address,"onUpdate:modelValue":a[1]||(a[1]=e=>Q.value.to_address=e)},null,8,["label","modelValue"]),(0,t.Wm)(n,{class:"q-mb-md",outlined:"","label-color":"dark",label:"Введите сумму вывода",modelValue:Q.value.amount,"onUpdate:modelValue":a[3]||(a[3]=e=>Q.value.amount=e),type:"number"},(0,t.Nv)({_:2},[y.value?{name:"append",fn:(0,t.w5)((()=>[(0,t.Wm)(d,{onClick:a[2]||(a[2]=e=>Q.value.amount=y.value),size:"10px",flat:"",label:"Вывести все"})])),key:"0"}:void 0]),1032,["modelValue"]),(0,t._)("p",g,"Комиссия за вывод составит "+(0,u.zw)(Q.value.network?.withdrawal_comission)+" "+(0,u.zw)(Z.value.name),1),Q.value.amount?((0,t.wg)(),(0,t.iD)("p",f,"Вы получите "+(0,u.zw)(parseFloat(Q.value.amount)-parseFloat(Q.value.network?.withdrawal_comission))+" "+(0,u.zw)(Z.value.name),1)):(0,t.kq)("",!0),(0,t.Wm)(o,{class:"q-mb-md",color:"dark",modelValue:Q.value.agree,"onUpdate:modelValue":a[4]||(a[4]=e=>Q.value.agree=e),label:"Вы уверены, что указанные данные для вывода верны?"},null,8,["modelValue"]),(0,t.Wm)(i,{label:"Отправить заявку на вывод",onClick:V,disabled:!Q.value.agree||!Q.value.amount||parseFloat(Q.value.amount>0)||!Q.value.to_address,loading:(0,s.SU)(x)},null,8,["disabled","loading"])])):(0,t.kq)("",!0)])),_:1})])),_:1}),(0,t.Wm)(m,{class:"q-mb-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[b,(0,s.SU)(h).user.withdrawals.length>0?((0,t.wg)(),(0,t.iD)("div",W,[(0,t.Wm)(D,{separator:"",class:"withdrawal-list"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,s.SU)(h).user.withdrawals,(e=>((0,t.wg)(),(0,t.j4)(z,{class:"withdrawal-item",key:e.id},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)("ID")])),_:1}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.id),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)("Дата создания")])),_:1}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(new Date(e.created_at).toLocaleDateString()),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)("Сеть")])),_:1}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.network?.name),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)("Актив")])),_:1}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.asset?.name),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)("Сумма")])),_:1}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(parseFloat(e.amount)),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)("Адрес")])),_:1}),(0,t.Wm)(r,{class:"ellipsis"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.to_address),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)("Статус")])),_:1}),!1===e.is_accept&&!1===e.is_declined?((0,t.wg)(),(0,t.j4)(r,{key:0,class:"text-warning"},{default:(0,t.w5)((()=>[(0,t.Uk)("В обработке")])),_:1})):e.is_accept?((0,t.wg)(),(0,t.j4)(r,{key:1,class:"text-positive"},{default:(0,t.w5)((()=>[(0,t.Uk)("Переведено")])),_:1})):e.is_declined?((0,t.wg)(),(0,t.j4)(r,{key:2,class:"text-negative"},{default:(0,t.w5)((()=>[(0,t.Uk)("Отменено")])),_:1})):(0,t.kq)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])):((0,t.wg)(),(0,t.iD)("p",U,"Вы еще ничего не выводили"))])),_:1})])),_:1})])])),_:1})}}};var q=l(69885),y=l(44458),x=l(63190),z=l(18401),Q=l(13119),V=l(68879),Z=l(96937),D=l(13246),S=l(490),F=l(76749),j=l(33115),C=l(69984),I=l.n(C);const T=h,N=T;I()(h,"components",{QPage:q.Z,QCard:y.Z,QCardSection:x.Z,QSelect:z.Z,QInput:Q.Z,QBtn:V.Z,QCheckbox:Z.Z,QList:D.Z,QItem:S.Z,QItemSection:F.Z,QItemLabel:j.Z})}}]);