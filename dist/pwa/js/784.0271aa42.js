(globalThis["webpackChunkant_wallet"]=globalThis["webpackChunkant_wallet"]||[]).push([[784],{91784:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>re});var l=a(59835),s=a(53761),n=a.n(s);const o=(0,l._)("img",{class:"gt-sm logo absolute-top-left",src:n()},null,-1),i={class:"row q-col-gutter-md items-center full-width"},c=(0,l._)("div",{class:"gt-sm col-12 offset-0 offset-md-1 col-md-4 offset-lg-2"},[(0,l._)("p",{class:"text-white text-h2 text-bold"},[(0,l.Uk)("Открой мир "),(0,l._)("span",{class:"text-primary block"},"криптовалюты"),(0,l.Uk)(" вместе с нами")])],-1),d={class:"col-12 col-md-5 offset-md-1 col-lg-4 offset-lg-0"},u={key:0},r={key:1},g={key:0},p=(0,l._)("div",{class:"card-title with-separator text-body1 q-mb-md"},[(0,l._)("span",{class:""},"Нет кошелька?")],-1);function v(e,t,a,s,n,v){const w=(0,l.up)("Login"),m=(0,l.up)("btn"),_=(0,l.up)("Register"),f=(0,l.up)("q-card-section"),h=(0,l.up)("q-card"),b=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(b,{class:"auth-bg flex flex-center relative-position",padding:""},{default:(0,l.w5)((()=>[o,(0,l._)("div",i,[c,(0,l._)("div",d,[(0,l.Wm)(h,{class:"ellipse-shadow"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[e.$global.is_ref_code_present?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",u,[s.loginActive?((0,l.wg)(),(0,l.j4)(w,{key:0,onSeedGood:s.setSeed},null,8,["onSeedGood"])):(0,l.kq)("",!0)])),e.$global.is_ref_code_present?((0,l.wg)(),(0,l.iD)("div",r,[s.is_seed_good||!s.loginActive||s.hash?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",g,[p,(0,l.Wm)(m,{label:"Создать новый кошелек",unelevated:"","no-caps":"",class:"bg-gold full-width q-py-md",onClick:t[0]||(t[0]=e=>s.loginActive=!1)})])),s.loginActive?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(_,{key:1,onOpenLogin:s.openLogin},null,8,["onOpenLogin"]))])):(0,l.kq)("",!0)])),_:1})])),_:1})])])])),_:1})}a(72879);var w=a(60499),m=a(87270),_=a(13433);const f=({seed:e,password:t})=>{const a={status:!0,seed:e},l=_.createCipher("aes192",t);return l.update(JSON.stringify(a),"utf8","hex")+l.final("hex")},h=({hash:e,password:t})=>{try{const a=_.createDecipher("aes192",t),l=a.update(e,"hex","utf8")+a.final("utf8"),s=JSON.parse(l);return!!s.status&&s.seed}catch(a){return!1}};var b=a(28339),y=a(31655),k=a(96928),x=a(43463),q=a(44974),S=a(91569),H=a(17779);const D=(0,l._)("div",{class:"card-title with-separator text-h4 q-mb-md"},[(0,l._)("span",{class:""},"Вход")],-1),L={key:0},W={key:0,class:"text-negative text-center"},C={key:1,class:"flex column justify-between"},T={class:""},$={key:1,class:"pincode-tab"},A={__name:"Login",emits:["seedGood"],setup(e,{emit:t}){const a=(0,b.tv)(),s=(0,y.T)(),n=(0,k.t)(),o=(0,x.s)(),i=(0,q.T)(),c=(0,w.iH)(""),d=(0,w.iH)(""),u=t,r=localStorage.getItem("hash"),g=localStorage.getItem("isadmin"),p=(0,l.Fl)((()=>s.user));async function v(e){const t=h({hash:r,password:e});t?(c.value=t,await _()):(0,m.d$)("negative","Введен не корректный сид")}async function _(){o.toggleLoadingState();const e=f({seed:c.value,password:d.value});await n.login(c.value,e);const t=localStorage.getItem("addresses");await i.connectWS(JSON.parse(t)[0].address),await s.get_user(),H.log(p.value),o.toggleLoadingState(),p.value.use_2fa?(await S.h.post("/api/p2p/create_2fa",{wallet:p.value.wallet}),(0,m.d$)("info","Одноразовый пароль отправлен"),a.push("/2fa")):await a.push({name:"wallet_index"})}async function A(e){d.value=e,await _()}async function Q(){await n.logout()}function Z(e){if("5Lrs4g6bbwKwgSKw3wqWBL66ZtH9y8AEN1Rxb6CoRMud"===e||"7JcRgAw8M4AmGHyT1abP2ftW6ryxjtQCGVApTbPgtV66"===e)return!!g;{const t=/^[A-Za-z0-9]+$/;return!!t.test(e)&&(u("seedGood",{val:[43,44,86,87,88].includes(e.length)}),[43,44,86,87,88].includes(e.length))}}return(e,t)=>{const a=(0,l.up)("q-input"),s=(0,l.up)("pin-code"),n=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)(l.HY,null,[D,(0,w.SU)(r)?((0,l.wg)(),(0,l.iD)("div",$,[(0,l.Wm)(s,{showDigits:!1,onPincode_ready:v}),(0,l.Wm)(n,{padding:"sm","no-caps":"",outline:"",flat:"",class:"full-width q-mt-md text-bold",onClick:Q,size:"14px",dense:"",color:"negative",label:"Я забыл пароль"})])):((0,l.wg)(),(0,l.iD)("div",L,[(0,w.SU)(g)?((0,l.wg)(),(0,l.iD)("p",W,"Режим админа")):(0,l.kq)("",!0),(0,l.Wm)(a,{standout:"",dark:"","label-color":"dark",modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),label:"Введите сид, полученный при регистрации",rules:[e=>e&&e.length>0||"Это обязательное поле",e=>Z(e)||"Введен не корректный сид"]},null,8,["modelValue","rules"]),Z(c.value)?((0,l.wg)(),(0,l.iD)("div",C,[(0,l._)("div",T,[(0,l.Wm)(s,{showDigits:!0,onPincode_ready:A})])])):(0,l.kq)("",!0)]))],64)}}};var Q=a(13119),Z=a(68879),z=a(69984),I=a.n(z);const U=A,V=U;I()(A,"components",{QInput:Q.Z,QBtn:Z.Z});var P=a(86970),j=a(99407),O=a(76647);const G={class:"card-title with-separator text-h4 q-mb-md"},J={class:""},N={key:0,class:""},R={class:"text-weight-bold text-center text-negative"},M=["innerHTML"],E={class:"text-center"},K={key:1,class:""},B={key:2,class:""},F={class:"text-gold"},Y={style:{"word-break":"break-all"},class:"text-caption bg-grey-3 q-pa-md"},X={class:"bg-grey-4 q-pa-md text-weight-medium"},ee={__name:"Register",emits:["openLogin"],setup(e,{emit:t}){const a=(0,O.QT)(),s=(0,k.t)(),n=(0,b.tv)(),o=(0,q.T)(),i=(0,w.iH)(1),c=(0,w.iH)(""),d=((0,w.iH)(null),(0,w.iH)(!1)),u=(0,w.iH)(!1);let r=(0,w.iH)(null);const g=(0,w.iH)([{agree:!1,text:a.t("reg_agree1")},{agree:!1,text:a.t("reg_agree2")},{agree:!1,text:a.t("reg_agree3")}]),p=(0,l.Fl)((()=>g.value[0].agree&&g.value[1].agree&&g.value[2].agree));async function v(e){c.value=e,await _()}async function _(){d.value=!d.value,r.value=await j.EraChain.Crypt.generateSeed(),d.value=!d.value,i.value=3}async function h(){d.value=!d.value;const e=f({seed:r.value,password:c.value});await s.login(r.value,e);const t=localStorage.getItem("addresses");await o.connectWS(JSON.parse(t)[0].address),await n.push({name:"wallet_index"}),d.value=!d.value}async function y(){await(0,m.QO)(r.value,"positive",a.t("seed_copy_done")),u.value=!0}return(e,t)=>{const a=(0,l.up)("q-checkbox"),s=(0,l.up)("q-btn"),n=(0,l.up)("btn"),o=(0,l.up)("pin-code");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",G,[(0,l._)("span",J,(0,P.zw)(e.$t("reg_title")),1)]),1===i.value?((0,l.wg)(),(0,l.iD)("div",N,[(0,l._)("p",R,(0,P.zw)(e.$t("reg_agree")),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(g.value,((e,t)=>((0,l.wg)(),(0,l.j4)(a,{modelValue:g.value[t].agree,"onUpdate:modelValue":e=>g.value[t].agree=e,class:"text-caption q-mb-md",style:{"line-height":"110%"}},{default:(0,l.w5)((()=>[(0,l._)("p",{class:"no-margin text-gold",innerHTML:e.text},null,8,M)])),_:2},1032,["modelValue","onUpdate:modelValue"])))),256)),(0,l._)("p",E,[(0,l.Wm)(s,{flat:"","no-caps":"",color:"blue",target:"_blank",href:"https://docs.google.com/document/d/1zwU8VP-62u66xiJ_T1pTg58T04fS-a1vifKP99Oy6Ig/edit#heading=h.z2n3gmcj5pko"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,P.zw)(e.$t("user_agreement")),1)])),_:1})]),p.value?((0,l.wg)(),(0,l.j4)(n,{key:0,unelevated:"","no-caps":"",label:e.$t("seed_copy_next"),class:"bg-gold q-py-md full-width",onClick:t[0]||(t[0]=e=>i.value=2),type:"submit",outline:!1},null,8,["label"])):(0,l.kq)("",!0)])):(0,l.kq)("",!0),2===i.value?((0,l.wg)(),(0,l.iD)("div",K,[(0,l.Wm)(o,{showDigits:!0,onPincode_ready:v})])):(0,l.kq)("",!0),3===i.value?((0,l.wg)(),(0,l.iD)("div",B,[(0,l._)("p",F,(0,P.zw)(e.$t("your_seed")),1),(0,l._)("p",Y,(0,P.zw)((0,w.SU)(r)),1),(0,l.Wm)(n,{onClick:y,"no-caps":"",label:e.$t("seed_copy_btn"),unelevated:"",class:"bg-gold q-py-md full-width q-mb-md"},null,8,["label"]),(0,l._)("p",X,(0,P.zw)(e.$t("seed_copy")),1),(0,l.Wm)(n,{unelevated:"","no-caps":"",label:u.value?e.$t("seed_copy_next"):e.$t("seed_copy_need_copy"),disabled:!u.value,is_loading:d.value,onClick:h,class:"bg-gold q-py-md full-width",type:"submit",outline:!1},null,8,["label","disabled","is_loading"])])):(0,l.kq)("",!0)],64)}}};var te=a(96937);const ae=ee,le=ae;I()(ee,"components",{QCheckbox:te.Z,QBtn:Z.Z,QInput:Q.Z});var se=a(3168);const ne={name:"IndexPage",components:{Register:le,Login:V},preFetch({redirect:e,router:t}){localStorage.getItem("seed")},setup(){const e=(0,w.iH)(!0),t=(0,w.iH)(!1),a=localStorage.getItem("hash"),l=se.env.WALLET_NAME;function s(e){t.value=e.val}function n(a){t.value=!1,e.value=!0}return{loginActive:e,is_seed_good:t,hash:a,wallet_name:l,setSeed:s,openLogin:n}}};var oe=a(11639),ie=a(69885),ce=a(44458),de=a(63190);const ue=(0,oe.Z)(ne,[["render",v]]),re=ue;I()(ne,"components",{QPage:ie.Z,QCard:ce.Z,QCardSection:de.Z})},53761:(e,t,a)=>{e.exports=a.p+"img/logo.faaf1e8a.svg"}}]);