"use strict";(globalThis["webpackChunkant_wallet"]=globalThis["webpackChunkant_wallet"]||[]).push([[0],{8e3:(e,l,a)=>{a.r(l),a.d(l,{default:()=>D});a(72879);var t=a(59835),u=a(86970),s=a(60499),n=a(91569),p=a(28339),o=a(46190),_=a(76647),v=a(31655),i=a(87270);const r={class:"container"},d={class:"title"},m={class:"q-mb-sm"},w={class:"text-bold"},c=(0,t._)("br",null,null,-1),y={class:"text-bold"},b=(0,t._)("br",null,null,-1),$=(0,t._)("br",null,null,-1),f={class:"text-bold"},k=(0,t._)("br",null,null,-1),g={key:4,class:"text-bold"},z=(0,t._)("br",null,null,-1),U=(0,t._)("span",{class:"text-bold"},null,-1),x={class:"text-bold"},F={class:"text-bold"},q={key:0,class:"text-negative text-bold"},h={__name:"Offer",setup(e){const l=(0,p.yj)(),a=(0,p.tv)(),h=(0,o.c)(),Q=(0,_.QT)(),W=(0,v.T)(),Z=(0,s.iH)({asset:{name:""},user:{wallet:"",total_trades:0}}),j=(0,s.iH)(null),C=(0,s.iH)(null),V=(0,s.iH)(!1),B=(0,t.Fl)((()=>W.user)),H=(0,t.Fl)((()=>{if(C.value){let e=C.value.payment_type.id;return B.value.payment_types.filter((l=>l.payment_type.id===e))}return!1})),T=(0,t.Fl)((()=>{if(C.value){let e=C.value.payment_type.id;return D.value?B.value.payment_types.filter((l=>l.payment_type.id===e)):Z.value.user.payment_types.filter((l=>l.payment_type.id===e))}})),R=(0,t.Fl)((()=>D.value?`${Q.t("sell")} ${j.value} ${Z.value.asset.name} ${Q.t("p2p_na")} ${O.value} RUB`:`${Q.t("buy")} ${j.value} ${Z.value.asset.name}  ${Q.t("p2p_na")} ${O.value} RUB`)),S=(0,t.Fl)((()=>A.value?D.value?"negative":"positive":"grey-7")),D=(0,t.Fl)((()=>Z.value.is_sell?Z.value.user.wallet===B.value.wallet:Z.value.user.wallet!==B.value.wallet)),I=(0,t.Fl)((()=>h.addresses[h.currentAddressIdx].address)),A=(0,t.Fl)((()=>parseFloat(j.value)>=Z.value.min_amount&&parseFloat(j.value)<=Z.value.amount&&C.value&&T.value.length>0)),O=(0,t.Fl)((()=>{if(j.value)return parseFloat(j.value)*Z.value.course}));async function P(){V.value=!V.value;const e=await n.h.post("/api/p2p/create_trade",{offer_id:Z.value.id,amount:j.value,asset_amount_without_commission:parseFloat(j.value-.01*j.value).toFixed(5),payment_type:T.value[0].id,opponent:I.value});e.data.success?(0,i.d$)("positive",e.data.message):(0,i.d$)("negative",e.data.message),V.value=!V.value,await W.get_own_trades(),a.push({name:"p2p_index"})}return(0,t.wF)((async()=>{let e=l.params.offer_id;const a=await n.h.get(`/api/p2p/offer?id=${e}`);Z.value=a.data})),(e,l)=>{const a=(0,t.up)("q-badge"),s=(0,t.up)("q-separator"),n=(0,t.up)("q-btn"),p=(0,t.up)("q-input"),o=(0,t.up)("q-select"),_=(0,t.up)("router-link"),v=(0,t.up)("q-card-section"),i=(0,t.up)("q-card"),h=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(h,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t._)("p",d,(0,u.zw)(e.$t("p2p_offer"))+" #"+(0,u.zw)(Z.value.id),1),(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t._)("p",m,[(0,t.Uk)((0,u.zw)(Z.value.is_sell?e.$t("p2p_selling"):e.$t("p2p_buying"))+" ",1),(0,t._)("span",w,(0,u.zw)(Z.value.amount)+" "+(0,u.zw)(Z.value.asset.name)+" по "+(0,u.zw)(Z.value.course)+" RUB",1),(0,t.Uk)(),c,(0,t.Uk)(" "+(0,u.zw)(e.$t("p2p_volume_min"))+" ",1),(0,t._)("span",y,(0,u.zw)(Z.value.min_amount)+" "+(0,u.zw)(Z.value.asset.name),1),b,(0,t.Uk)(" "+(0,u.zw)(Z.value.is_sell?e.$t("p2p_trade_seller"):e.$t("p2p_trade_buyer"))+" "+(0,u.zw)(Z.value.user.wallet)+" ",1),Z.value.user.is_vip?((0,t.wg)(),(0,t.j4)(a,{key:0,color:"positive"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("p2p_verify")),1)])),_:1})):((0,t.wg)(),(0,t.j4)(a,{key:1,color:"negative"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("p2p_not_verify")),1)])),_:1})),Z.value.user.is_online?((0,t.wg)(),(0,t.j4)(a,{key:2,color:"positive"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("p2p_online")),1)])),_:1})):((0,t.wg)(),(0,t.j4)(a,{key:3,color:"negative"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("p2p_offline")),1)])),_:1})),$,(0,t.Uk)(" "+(0,u.zw)(e.$t("p2p_trades"))+" ",1),(0,t._)("span",f,(0,u.zw)(Z.value.user.total_trades),1),k,Z.value.rules?((0,t.wg)(),(0,t.iD)("span",g,[(0,t.Uk)((0,u.zw)(e.$t("p2p_rules"))+": ",1),z])):(0,t.kq)("",!0),(0,t.Uk)((0,u.zw)(Z.value.rules),1)]),(0,t.Wm)(s,{spaced:"md"}),U,(0,t._)("p",null,[(0,t.Uk)((0,u.zw)(e.$t("p2p_enter_min"))+": ",1),(0,t._)("span",x,(0,u.zw)(Z.value.min_amount)+" "+(0,u.zw)(Z.value.asset.name),1),(0,t.Uk)(", "+(0,u.zw)(e.$t("buy_amomunt_max"))+": ",1),(0,t._)("span",F,(0,u.zw)(Z.value.amount)+" "+(0,u.zw)(Z.value.asset.name),1)]),(0,t.Wm)(p,{outlined:"",modelValue:j.value,"onUpdate:modelValue":l[1]||(l[1]=e=>j.value=e),type:"number",label:`Объем сделки в ${Z.value.asset.name}`,class:"q-mb-md"},{append:(0,t.w5)((()=>[(0,t.Wm)(n,{onClick:l[0]||(l[0]=e=>j.value=Z.value.amount),size:"10px",unelevated:"",outline:"",color:"dark","no-caps":"",label:e.$t("buy_amomunt_max")},null,8,["label"])])),_:1},8,["modelValue","label"]),(0,t._)("p",null,(0,u.zw)(e.$t("p2p_select_payment_system1")),1),(0,t.Wm)(o,{outlined:"",modelValue:C.value,"onUpdate:modelValue":l[2]||(l[2]=e=>C.value=e),options:Z.value.payment_types,class:"q-mb-md",label:e.$t("p2p_payment_system"),behavior:"menu"},null,8,["modelValue","options","label"]),C.value&&!H.value.length>0?((0,t.wg)(),(0,t.iD)("p",q,[(0,t.Uk)((0,u.zw)(e.$t("p2p_no_payment_system"))+" ",1),(0,t.Wm)(_,{to:{name:"p2p_user"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.$t("app_pc_ver_btn")),1)])),_:1}),(0,t.Uk)(" "+(0,u.zw)(e.$t("p2p_no_payment_system_or"))+".",1)])):(0,t.kq)("",!0),(0,t.Wm)(n,{disable:!A.value,label:A.value?R.value:e.$t("p2p_all_fields"),class:"full-width q-py-md",color:S.value,"no-caps":"",onClick:P,loading:V.value,unelevated:""},null,8,["disable","label","color","loading"])])),_:1})])),_:1})])])),_:1})}}};var Q=a(69885),W=a(44458),Z=a(63190),j=a(20990),C=a(50926),V=a(13119),B=a(24455),H=a(10215),T=a(69984),R=a.n(T);const S=h,D=S;R()(h,"components",{QPage:Q.Z,QCard:W.Z,QCardSection:Z.Z,QBadge:j.Z,QSeparator:C.Z,QInput:V.Z,QBtn:B.Z,QSelect:H.Z})}}]);