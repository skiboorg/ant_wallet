"use strict";(globalThis["webpackChunkant_wallet"]=globalThis["webpackChunkant_wallet"]||[]).push([[591],{45591:(e,l,a)=>{a.r(l),a.d(l,{default:()=>Vl});a(72879);var t=a(59835),s=a(86970),n=a(60499),o=a(91569),u=a(28339),r=a(23459),i=a(98030),p=a(31655),d=a(87270),_=a(76647),v=a(17779);const w={class:"container"},c={class:"title"},f={class:"text-bold"},m={class:"text-bold"},g={key:0,class:"text-bold text-center text-primary"},b={key:1},y={key:2},x={key:0},k={key:0,class:"q-mb-md"},h=["innerHTML"],z={key:1},$={key:0},q={key:1},U={class:"text-bold"},D={class:"text-bold"},W={class:"text-bold"},C=(0,t._)("br",null,null,-1),j={class:"text-bold text-negative text-uppercase"},H=(0,t._)("br",null,null,-1),Q={class:"text-bold"},Z=(0,t._)("br",null,null,-1),S=(0,t._)("br",null,null,-1),V={class:"text-bold"},T=(0,t._)("br",null,null,-1),I={class:"text-bold"},A=(0,t._)("br",null,null,-1),F={key:2},B=["href"],P=(0,t._)("br",null,null,-1),K=(0,t._)("br",null,null,-1),R={key:3},J=["href"],L=(0,t._)("br",null,null,-1),M=(0,t._)("br",null,null,-1),N={key:0},O={key:0},E={key:1},G={key:0},X={class:"text-bold"},Y={key:1},ee={class:"text-bold text-negative text-center text-justify"},le={key:2},ae=["href"],te={class:"text-bold"},se={key:0},ne={class:"text-bold"},oe=(0,t._)("br",null,null,-1),ue=(0,t._)("br",null,null,-1),re={class:"text-caption text-bold text-negative text-justify"},ie={key:3},pe={key:0},de=["href"],_e={key:4},ve=["href"],we={class:"text-bold"},ce={key:1},fe={class:"text-negative text-center items-center"},me={key:0},ge={key:1},be={class:"text-bold"},ye={class:"text-bold"},xe={class:"text-bold"},ke=(0,t._)("br",null,null,-1),he={class:"text-bold text-negative text-uppercase"},ze=(0,t._)("br",null,null,-1),$e={class:"text-bold"},qe=(0,t._)("br",null,null,-1),Ue=(0,t._)("br",null,null,-1),De={class:"text-bold"},We=(0,t._)("br",null,null,-1),Ce={class:"text-bold"},je=(0,t._)("br",null,null,-1),He={key:2},Qe=["href"],Ze=(0,t._)("br",null,null,-1),Se=(0,t._)("br",null,null,-1),Ve={key:3},Te=["href"],Ie=(0,t._)("br",null,null,-1),Ae=(0,t._)("br",null,null,-1),Fe={key:2},Be=(0,t._)("p",{class:"text-bold text-center text-positive"},"Админ часть",-1),Pe=(0,t._)("br",null,null,-1),Ke=(0,t._)("br",null,null,-1),Re=(0,t._)("br",null,null,-1),Je=(0,t._)("br",null,null,-1),Le=(0,t._)("br",null,null,-1),Me=(0,t._)("br",null,null,-1),Ne=(0,t._)("br",null,null,-1),Oe=["href"],Ee=(0,t._)("br",null,null,-1),Ge=(0,t._)("br",null,null,-1),Xe=["href"],Ye=(0,t._)("br",null,null,-1),el={key:0},ll=["href"],al={class:"text-bold"},tl={key:1},sl=["href"],nl={class:"text-bold"},ol={key:2},ul=["href"],rl=(0,t._)("br",null,null,-1),il=(0,t._)("br",null,null,-1),pl={key:3},dl=["href"],_l={class:"text-bold"},vl={class:"full-height"},wl=(0,t._)("br",null,null,-1),cl={key:0},fl=["href"],ml={class:"flex items-center"},gl="7JXmTnbwuDnpqQ3NwxwzhfGgDk223j13eP",bl={__name:"Trade",setup(e){const l=new Audio("notify.mp3"),bl=(0,u.yj)(),yl=(0,u.tv)(),{EraChain:xl}=a(99407),kl=(0,r.Q)(),hl=(0,p.T)(),zl=(0,n.iH)(null),$l=(0,n.iH)(null),ql=(0,n.iH)(null),Ul=(0,n.iH)(null),Dl=(0,n.iH)(null),Wl=(0,n.iH)(null),Cl=(0,n.iH)(null),jl=(0,n.iH)(null),Hl=(0,n.iH)(!1);let Ql=(0,n.iH)(!1);const Zl=(0,n.iH)([]),Sl=((0,n.iH)(0),(0,n.iH)(3e5)),Vl=(0,_.QT)(),Tl=(Vl.t("p2p_error"),(0,t.Fl)((()=>hl.user))),Il=(0,t.Fl)((()=>hl.trade)),Al=(0,t.Fl)((()=>Il.value.offer.is_sell?Il.value.offer.user.wallet===Tl.value.wallet:Il.value.opponent.wallet===Tl.value.wallet));function Fl(){jl.value=setInterval((async function(){await hl.get_trade()}),5e3)}async function Bl(e){let l=Tl.value.wallet;"money_receive"===e&&(l=Tl.value.is_p2p_admin?Il.value.freeze_user===Il.value.opponent.wallet?Il.value.offer.user.wallet:Il.value.opponent.wallet:Il.value.offer.user.wallet!==Tl.value.wallet?Il.value.offer.user.wallet:Il.value.opponent.wallet),v.log(Dl.value),Hl.value=!Hl.value;let a=new FormData;a.set("action",e),Dl.value&&a.set("file",Dl.value),a.set("wallet",l),a.set("uid",Il.value.UID),v.log(a);const t=await(0,o.h)({method:"post",headers:{"content-type":"multipart/form-data"},url:"/api/p2p/trade_action",data:a});t.data.success?(0,d.d$)("positive",t.data.message):(0,d.d$)("negative",t.data.message),Hl.value=!Hl.value,"delete"===e&&yl.push({name:"p2p_index"}),"money_receive"===e&&yl.push({name:"p2p_index"})}async function Pl(){zl.value=new WebSocket(`ws://46.175.148.15:8000/ws/trade_chat/${Il.value.UID}`);const e=await o.h.get(`/api/p2p/get_trade_chat?trade_uid=${Il.value.UID}`);v.log(e.data),Zl.value=e.data.messages,zl.value.onmessage=async e=>{let a=JSON.parse(e.data)["message"];v.log("DATA",a.user.wallet);let t={id:a.id,message:a.message,file:a.file?a.file:null,createdAt:a.createdAt,user:{wallet:a.user.wallet,is_p2p_admin:a.user.is_p2p_admin,fio:a.user.fio}};Zl.value.push(t),Rl(),l.play()}}async function Kl(e){13===e.keyCode&&Ul.value&&await Ll()}function Rl(){Ql.value&&(Cl.value.setScrollPosition("vertical",Sl.value,300),Sl.value=20*Math.floor(300))}function Jl(){Rl()}async function Ll(){Hl.value=!Hl.value;let e=new FormData;e.set("message",JSON.stringify(Ul.value)),e.set("file",Wl.value),e.set("wallet",Tl.value.wallet),e.set("trade_uid",Il.value.UID),v.log(e);await(0,o.h)({method:"post",headers:{"content-type":"multipart/form-data"},url:"/api/p2p/add_message_in_trade_chat",data:e});Ul.value=null,Wl.value=null,Hl.value=!Hl.value}async function Ml(){Hl.value=!Hl.value;const e=!0,l=await kl.getKeyPair(),a=new xl.Type.KeyPair(l),t={assetKey:Il.value.offer.asset.key,amount:Il.value.asset_amount};v.log(a),v.log(t);const s=await i.era.tranRawSendAsset(a,t,gl,Vl.t("p2p_depon"),`${Vl.t("p2p_trade")} ${Il.value.id} ${Vl.t("p2p_by_offer")} ${Il.value.offer.id}`,!1,e);v.log(s),s.error?(0,d.d$)("negative",s.error.message):($l.value=s.fee,ql.value=s.raw,await Nl()),Hl.value=!Hl.value}async function Nl(){const e=await i.era.broadcast64(ql.value);if(v.log(e),e.error)(0,d.d$)("negative",e.message);else{(0,d.d$)("positive",Vl.t("p2p_depon1"));await o.h.post("/api/p2p/trade_action",{action:"freeze_money",uid:Il.value.UID,tx:e.signature,wallet:Tl.value.wallet})}}return(0,t.wF)((async()=>{hl.current_trade_uid=bl.params.uid,await hl.get_user(),v.log("wallet",Tl.value),await hl.get_trade(),await Pl(),Il.value.status.is_need_help&&(Ql.value=!0),Fl()})),(0,t.Jd)((async()=>{zl.value?zl.value.close():v.log("not connect"),clearInterval(jl.value)})),(e,l)=>{const a=(0,t.up)("q-btn"),o=(0,t.up)("q-card-section"),u=(0,t.up)("q-card"),r=(0,t.up)("q-badge"),i=(0,t.up)("q-separator"),p=(0,t.up)("q-icon"),d=(0,t.up)("q-file"),_=(0,t.up)("q-chat-message"),v=(0,t.up)("q-scroll-area"),gl=(0,t.up)("q-input"),bl=(0,t.up)("q-dialog"),yl=(0,t.up)("q-page"),xl=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(yl,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("div",w,[(0,t._)("p",c,[(0,t.Uk)((0,s.zw)(e.$t("p2p_trade"))+" ",1),(0,t._)("span",f,"#"+(0,s.zw)(Il.value.id),1),(0,t.Uk)(" "+(0,s.zw)(e.$t("p2p_by_offer"))+" ",1),(0,t._)("span",m,"#"+(0,s.zw)(Il.value.offer.id),1)]),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[!Il.value.can_delete&&Il.value.status.is_default?((0,t.wg)(),(0,t.iD)("p",g,(0,s.zw)(e.$t("p2p_trade_can_decline"))+" "+(0,s.zw)(new Date(Il.value.can_delete_time).toLocaleString()),1)):(0,t.kq)("",!0),Il.value.status.is_default&&Il.value.can_delete?((0,t.wg)(),(0,t.iD)("div",b,[(0,t.Wm)(a,{class:"full-width q-mb-md","no-caps":"",unelevated:"",color:"negative",onClick:l[0]||(l[0]=e=>Bl("delete")),label:e.$t("p2p_trade_decline")},null,8,["label"])])):(0,t.kq)("",!0),(0,t.Wm)(u,{flat:"",class:(0,s.C_)(["text-bold text-center q-mb-md text-white",`bg-${Il.value.status.color}`])},{default:(0,t.w5)((()=>[(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,(0,s.zw)(e.$t("p2p_trade_status"))+": "+(0,s.zw)(Il.value.status.label)+" ",1)])),_:1})])),_:1},8,["class"]),Il.value.status.is_declined?((0,t.wg)(),(0,t.iD)("div",pl,[Il.value.tx_send?((0,t.wg)(),(0,t.iD)("a",{key:0,class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://replace/index/main.html?tx=${Il.value.tx_return}&lang=en`,target:"_blank"},[(0,t._)("span",_l,"Транзакция возврата "+(0,s.zw)(Il.value.asset_amount)+" "+(0,s.zw)(Il.value.offer.asset.name),1)],8,dl)):(0,t.kq)("",!0)])):((0,t.wg)(),(0,t.iD)("div",y,[Il.value.status.is_need_help?((0,t.wg)(),(0,t.iD)("div",ce,[(0,t._)("p",fe,(0,s.zw)(e.$t("p2p_admin_wait")),1),(0,t._)("p",null,[Il.value.offer.is_sell?((0,t.wg)(),(0,t.iD)("span",me,(0,s.zw)(Il.value.opponent.wallet===Tl.value.wallet?e.$t("p2p_buy_orders"):e.$t("p2p_sell_orders")),1)):((0,t.wg)(),(0,t.iD)("span",ge,(0,s.zw)(Il.value.opponent.wallet===Tl.value.wallet?e.$t("p2p_sell_orders"):e.$t("p2p_buy_orders")),1)),(0,t._)("span",be," "+(0,s.zw)(Il.value.asset_amount)+" "+(0,s.zw)(Il.value.offer.asset.name),1),(0,t.Uk)("  "+(0,s.zw)(e.$t("p2p_trade_course"))+" ",1),(0,t._)("span",ye,(0,s.zw)(Il.value.offer.course)+" RUB",1),(0,t.Uk)(" "+(0,s.zw)(e.$t("p2p_trade_total_rub"))+" ",1),(0,t._)("span",xe,(0,s.zw)(Il.value.fiat_amount)+" RUB",1),ke,(0,t._)("span",he,(0,s.zw)(e.$t("p2p_trade_comm"))+" "+(0,s.zw)(Il.value.asset_amount_without_commission)+" "+(0,s.zw)(Il.value.offer.asset.name),1),ze,(0,t._)("span",$e,(0,s.zw)(e.$t("p2p_rules"))+":",1),qe,(0,t.Uk)((0,s.zw)(Il.value.offer.rules),1),Ue,(0,t._)("span",De,(0,s.zw)(e.$t("p2p_payment_system"))+":",1),(0,t.Uk)(" "+(0,s.zw)(Il.value.payment_type.label),1),We,(0,t._)("span",Ce,(0,s.zw)(Al.value?e.$t("p2p_trade_buyer"):e.$t("p2p_trade_seller")),1),je,Il.value.offer.user.wallet!==Tl.value.wallet?((0,t.wg)(),(0,t.iD)("span",He,[(0,t._)("a",{href:`https://replace/index/main.html?address=${Il.value.offer.user.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,s.zw)(Il.value.offer.user.fio?Il.value.offer.user.fio:Il.value.offer.user.wallet),9,Qe),Ze,Il.value.offer.user.fio?((0,t.wg)(),(0,t.j4)(r,{key:0,color:"positive"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.$t("p2p_verify")),1)])),_:1})):((0,t.wg)(),(0,t.j4)(r,{key:1,color:"negative"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.$t("p2p_not_verify")),1)])),_:1})),Se,(0,t.Uk)(" "+(0,s.zw)(e.$t("p2p_finish_trades"))+" "+(0,s.zw)(Il.value.offer.user.total_trades),1)])):((0,t.wg)(),(0,t.iD)("span",Ve,[(0,t._)("a",{href:`https://replace/index/main.html?address=${Il.value.opponent.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,s.zw)(Il.value.opponent.fio?Il.value.opponent.fio:Il.value.opponent.wallet),9,Te),Ie,Il.value.opponent.fio?((0,t.wg)(),(0,t.j4)(r,{key:0,color:"positive"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.$t("p2p_verify")),1)])),_:1})):((0,t.wg)(),(0,t.j4)(r,{key:1,color:"negative"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.$t("p2p_not_verify")),1)])),_:1})),Ae,(0,t.Uk)(" "+(0,s.zw)(e.$t("p2p_finish_trades"))+" "+(0,s.zw)(Il.value.opponent.total_trades),1)]))])])):((0,t.wg)(),(0,t.iD)("div",x,[Il.value.status.is_default||Il.value.status.is_finished?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",k,[(0,t.Wm)(u,{flat:"",class:"bg-red-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[(0,t._)("p",{class:"text-white caption text-justify",innerHTML:e.$t("p2p_trade_call_admin_text")},null,8,h),(0,t.Wm)(a,{label:e.$t("p2p_trade_call_admin_btn"),loading:Hl.value,onClick:l[1]||(l[1]=e=>Bl("need_help")),class:"full-width","no-caps":"",unelevated:"",color:"yellow-4","text-color":"dark"},null,8,["label","loading"])])),_:1})])),_:1})])),Il.value.status.is_finished?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",z,[(0,t._)("p",null,[(0,t.Uk)("  "),Il.value.offer.is_sell?((0,t.wg)(),(0,t.iD)("span",$,(0,s.zw)(Il.value.opponent.wallet===Tl.value.wallet?e.$t("p2p_buy_orders"):e.$t("p2p_sell_orders")),1)):((0,t.wg)(),(0,t.iD)("span",q,(0,s.zw)(Il.value.opponent.wallet===Tl.value.wallet?e.$t("p2p_sell_orders"):e.$t("p2p_buy_orders")),1)),(0,t._)("span",U," "+(0,s.zw)(Il.value.asset_amount)+" "+(0,s.zw)(Il.value.offer.asset.name),1),(0,t.Uk)("  "+(0,s.zw)(e.$t("p2p_trade_course"))+" ",1),(0,t._)("span",D,(0,s.zw)(Il.value.offer.course)+" RUB",1),(0,t.Uk)(" "+(0,s.zw)(e.$t("p2p_trade_total_rub"))+" ",1),(0,t._)("span",W,(0,s.zw)(Il.value.fiat_amount)+" RUB",1),C,(0,t._)("span",j,(0,s.zw)(e.$t("p2p_trade_comm"))+" "+(0,s.zw)(Il.value.asset_amount_without_commission)+" "+(0,s.zw)(Il.value.offer.asset.name),1),H,(0,t._)("span",Q,(0,s.zw)(e.$t("p2p_rules"))+":",1),Z,(0,t.Uk)((0,s.zw)(Il.value.offer.rules),1),S,(0,t._)("span",V,(0,s.zw)(e.$t("p2p_payment_system"))+":",1),(0,t.Uk)(" "+(0,s.zw)(Il.value.payment_type.label),1),T,(0,t._)("span",I,(0,s.zw)(Al.value?e.$t("p2p_trade_buyer"):e.$t("p2p_trade_seller")),1),A,Il.value.offer.user.wallet!==Tl.value.wallet?((0,t.wg)(),(0,t.iD)("span",F,[(0,t._)("a",{href:`https://replace/index/main.html?address=${Il.value.offer.user.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,s.zw)(Il.value.offer.user.fio?Il.value.offer.user.fio:Il.value.offer.user.wallet),9,B),P,Il.value.offer.user.fio?((0,t.wg)(),(0,t.j4)(r,{key:0,color:"positive"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.$t("p2p_verify")),1)])),_:1})):((0,t.wg)(),(0,t.j4)(r,{key:1,color:"negative"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.$t("p2p_not_verify")),1)])),_:1})),K,(0,t.Uk)(" "+(0,s.zw)(e.$t("p2p_finish_trades"))+" "+(0,s.zw)(Il.value.offer.user.total_trades),1)])):((0,t.wg)(),(0,t.iD)("span",R,[(0,t._)("a",{href:`https://replace/index/main.html?address=${Il.value.opponent.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,s.zw)(Il.value.opponent.fio?Il.value.opponent.fio:Il.value.opponent.wallet),9,J),L,Il.value.opponent.fio?((0,t.wg)(),(0,t.j4)(r,{key:0,color:"positive"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.$t("p2p_verify")),1)])),_:1})):((0,t.wg)(),(0,t.j4)(r,{key:1,color:"negative"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.$t("p2p_not_verify")),1)])),_:1})),M,(0,t.Uk)(" "+(0,s.zw)(e.$t("p2p_finish_trades"))+" "+(0,s.zw)(Il.value.opponent.total_trades),1)]))]),(0,t.Wm)(i,{spaced:"lg"}),Il.value.status.is_default?((0,t.wg)(),(0,t.iD)("div",N,[Il.value.offer.user.wallet===Tl.value.wallet?((0,t.wg)(),(0,t.iD)("div",O,[(0,t.Wm)(a,{loading:Hl.value,label:e.$t("p2p_trade_agree"),color:"positive",class:"full-width q-py-md",onClick:l[2]||(l[2]=e=>Bl("trade_accept")),unelevated:"","no-caps":""},null,8,["loading","label"])])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),Il.value.status.is_active?((0,t.wg)(),(0,t.iD)("div",E,[Al.value?((0,t.wg)(),(0,t.iD)("div",G,[(0,t._)("p",null,[(0,t.Uk)((0,s.zw)(e.$t("p2p_trade_agree_text1"))+" ",1),(0,t._)("span",X,(0,s.zw)(Il.value.asset_amount)+" "+(0,s.zw)(Il.value.offer.asset.name),1),(0,t.Uk)(". "+(0,s.zw)(e.$t("p2p_trade_agree_text2")),1)]),(0,t.Wm)(a,{loading:Hl.value,label:`${e.$t("p2p_trade_depo")} ${Il.value.asset_amount} ${Il.value.offer.asset.name}`,color:"positive",class:"full-width q-py-md",onClick:Ml,unelevated:"","no-caps":""},null,8,["loading","label"])])):((0,t.wg)(),(0,t.iD)("div",Y,[(0,t._)("p",ee,(0,s.zw)(e.$t("p2p_trade_depo_text")),1),(0,t._)("p",null,(0,s.zw)(e.$t("p2p_trade_depo_wait"))+" "+(0,s.zw)(Il.value.asset_amount)+" "+(0,s.zw)(Il.value.offer.asset.name),1)]))])):(0,t.kq)("",!0),Il.value.status.is_money_freeze?((0,t.wg)(),(0,t.iD)("div",le,[(0,t._)("p",null,[(0,t._)("a",{class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://replace/index/main.html?tx=${Il.value.tx}&lang=en`,target:"_blank"},[(0,t._)("span",te,(0,s.zw)(e.$t("p2p_trade_depo_trans"))+" "+(0,s.zw)(Il.value.asset_amount)+" "+(0,s.zw)(Il.value.offer.asset.name),1)],8,ae)]),Al.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",se,[(0,t._)("p",ne,[(0,t.Uk)((0,s.zw)(e.$t("p2p_trade_sellser_text")),1),oe,(0,t.Uk)(" "+(0,s.zw)(e.$t("p2p_payment_system"))+": "+(0,s.zw)(Il.value.payment_type.label),1),ue,(0,t.Uk)(" "+(0,s.zw)(e.$t("p2p_trade_sellser_req"))+": "+(0,s.zw)(Il.value.payment_type.payment_info),1)]),(0,t._)("p",re,(0,s.zw)(e.$t("p2p_trade_sellser_confirm")),1),(0,t.Wm)(d,{outlined:"",label:e.$t("p2p_trade_sellser_confirm_btn"),modelValue:Dl.value,"onUpdate:modelValue":l[3]||(l[3]=e=>Dl.value=e),"bg-color":Dl.value?"positive":"red-1",color:"white",class:"q-mb-md"},{prepend:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"attach_file"})])),_:1},8,["label","modelValue","bg-color"]),(0,t.Wm)(a,{loading:Hl.value,disable:!Dl.value,label:Dl.value?e.$t("p2p_trade_sellser_confirm_btn_done"):e.$t("p2p_trade_sellser_confirm_btn_not"),color:Dl.value?"positive":"negative",class:"full-width q-py-md",onClick:l[4]||(l[4]=e=>Bl("money_send")),unelevated:"","no-caps":""},null,8,["loading","disable","label","color"])]))])):(0,t.kq)("",!0),Il.value.status.is_money_sent?((0,t.wg)(),(0,t.iD)("div",ie,[Al.value?((0,t.wg)(),(0,t.iD)("div",pe,[(0,t._)("p",null,[(0,t._)("a",{class:"text-primary text-bold",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:Il.value.send_img,target:"_blank"},(0,s.zw)(e.$t("p2p_trade_pay_confirm")),9,de)]),(0,t.Wm)(a,{loading:Hl.value,label:e.$t("p2p_trade_pay_confirm_btn"),color:"positive",class:"full-width q-py-md",onClick:l[5]||(l[5]=e=>Bl("money_receive")),unelevated:"","no-caps":""},null,8,["loading","label"])])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),Il.value.status.is_money_recieve?((0,t.wg)(),(0,t.iD)("div",_e,[(0,t._)("p",null,[(0,t._)("a",{class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://replace/index/main.html?tx=${Il.value.tx_send}&lang=en`,target:"_blank"},[(0,t._)("span",we,(0,s.zw)(e.$t("p2p_trade_pay_trans"))+" "+(0,s.zw)(Il.value.asset_amount)+" "+(0,s.zw)(Il.value.offer.asset.name),1)],8,ve)])])):(0,t.kq)("",!0)]))])),Tl.value.is_p2p_admin&&!Il.value.status.is_finished?((0,t.wg)(),(0,t.iD)("div",Fe,[(0,t.Wm)(i,{spaced:"lg"}),Be,(0,t._)("p",null,[(0,t.Uk)(" Cделка № "+(0,s.zw)(Il.value.id),1),Pe,(0,t.Uk)(" Оффер № "+(0,s.zw)(Il.value.offer.id),1),Ke,(0,t.Uk)(" Сумма сделки в рублях: "+(0,s.zw)(Il.value.fiat_amount),1),Re,(0,t.Uk)(" Сумма сделки в активе: "+(0,s.zw)(Il.value.asset_amount)+" "+(0,s.zw)(Il.value.offer.asset.name),1),Je,Le,(0,t.Uk)(" Тип оффера: "+(0,s.zw)(Il.value.offer.is_sell?"продажа":"покупка"),1),Me,Ne,(0,t.Uk)(" Создатель оффера: "),(0,t._)("a",{href:`https://replace/index/main.html?address=${Il.value.offer.user.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,s.zw)(Il.value.offer.user.wallet),9,Oe),Ee,(0,t.Uk)(),Ge,(0,t.Uk)(" Создатель сделки: "),(0,t._)("a",{href:`https://replace/index/main.html?address=${Il.value.opponent.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,s.zw)(Il.value.opponent.wallet),9,Xe),Ye]),Il.value.tx?((0,t.wg)(),(0,t.iD)("p",el,[(0,t._)("a",{class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://replace/index/main.html?tx=${Il.value.tx}&lang=en`,target:"_blank"},[(0,t._)("span",al,"Транзакция депонирования "+(0,s.zw)(Il.value.asset_amount)+" "+(0,s.zw)(Il.value.offer.asset.name),1)],8,ll)])):(0,t.kq)("",!0),Il.value.tx_send?((0,t.wg)(),(0,t.iD)("p",tl,[(0,t._)("a",{class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://replace/index/main.html?tx=${Il.value.tx_send}&lang=en`,target:"_blank"},[(0,t._)("span",nl,"Транзакция перевода "+(0,s.zw)(Il.value.asset_amount)+" "+(0,s.zw)(Il.value.offer.asset.name),1)],8,sl)])):(0,t.kq)("",!0),Il.value.send_img?((0,t.wg)(),(0,t.iD)("p",ol,[(0,t._)("a",{class:"text-primary text-bold",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:Il.value.send_img,target:"_blank"},"Подтверждение оплаты",8,ul)])):(0,t.kq)("",!0),rl,il,Il.value.tx?((0,t.wg)(),(0,t.j4)(a,{key:3,loading:Hl.value,label:"Отмена сделки с возвратом задепонированнго баланса продавцу",color:"negative",class:"full-width q-py-md q-mb-md",onClick:l[6]||(l[6]=e=>Bl("admin_stop")),unelevated:"","no-caps":""},null,8,["loading"])):(0,t.kq)("",!0),Il.value.tx?((0,t.wg)(),(0,t.j4)(a,{key:4,loading:Hl.value,label:"Завершить сделку с перечисление средств покупателю",color:"positive",class:"full-width q-py-md q-mb-md",onClick:l[7]||(l[7]=e=>Bl("money_receive")),unelevated:"","no-caps":""},null,8,["loading"])):(0,t.kq)("",!0),Il.value.tx?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(a,{key:5,loading:Hl.value,class:"full-width q-py-md","no-caps":"",unelevated:"",color:"negative",onClick:l[8]||(l[8]=e=>Bl("admin_decline")),label:"Отменить сделку"},null,8,["loading"]))])):(0,t.kq)("",!0)])),(0,t.Wm)(bl,{modelValue:(0,n.SU)(Ql),"onUpdate:modelValue":l[12]||(l[12]=e=>(0,n.dq)(Ql)?Ql.value=e:Ql=e),seamless:"",position:"bottom",onShow:Jl},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{class:"full-width"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{class:"q-pt-xl"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(a,{class:"absolute-top-right z-max",flat:"",round:"",icon:"close"},null,512),[[xl]]),(0,t._)("div",vl,[(0,t.Wm)(v,{ref_key:"messages_wrapper",ref:Cl,style:{height:"300px"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Zl.value,(l=>((0,t.wg)(),(0,t.j4)(_,{key:l.id,stamp:new Date(l.createdAt).toLocaleString(),name:l.user.fio,text:[l.message],sent:l.user.wallet===Tl.value.wallet,"bg-color":l.user.is_p2p_admin?"red-7":l.user.wallet===Tl.value.wallet?"green-3":"grey-3","text-color":l.user.is_p2p_admin?"white":""},{name:(0,t.w5)((()=>[(0,t._)("span",{class:(0,s.C_)(l.user.is_p2p_admin?"text-red-7":"")},(0,s.zw)(l.user.fio?l.user.fio:l.user.wallet),3),wl,l.file?((0,t.wg)(),(0,t.iD)("span",cl,[(0,t._)("a",{class:"file_link",target:"_blank",href:l.file},(0,s.zw)(e.$t("p2p_attach")),9,fl)])):(0,t.kq)("",!0)])),_:2},1032,["stamp","name","text","sent","bg-color","text-color"])))),128))])),_:1},512),(0,t._)("div",ml,[(0,t.Wm)(p,{size:"24px",class:"cursor-pointer q-mr-lg",color:Wl.value?"positive":"grey-6",name:"attach_file"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{style:{position:"absolute",width:"42px",opacity:"0"},modelValue:Wl.value,"onUpdate:modelValue":l[9]||(l[9]=e=>Wl.value=e)},null,8,["modelValue"])])),_:1},8,["color"]),(0,t.Wm)(gl,{outlined:"",class:"col-grow",loading:Hl.value,disable:Hl.value,onKeydown:Kl,modelValue:Ul.value,"onUpdate:modelValue":l[11]||(l[11]=e=>Ul.value=e),label:e.$t("p2p_message")},{append:(0,t.w5)((()=>[(0,t.Wm)(a,{round:"",dense:"",disable:!Ul.value,loading:Hl.value,onClick:l[10]||(l[10]=e=>Ll()),flat:"",icon:"send"},null,8,["disable","loading"])])),_:1},8,["loading","disable","modelValue","label"])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),Il.value.status.is_finished?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(a,{key:4,style:{position:"fixed",bottom:"20px",right:"20px"},flat:"",size:"24px",round:"","text-color":"white",icon:"chat",onClick:l[13]||(l[13]=e=>(0,n.dq)(Ql)?Ql.value=!0:Ql=!0)},{default:(0,t.w5)((()=>[Zl.value.length>0?((0,t.wg)(),(0,t.j4)(p,{key:0,class:"absolute-top-right",size:"16px",color:"red",name:"priority_high"})):(0,t.kq)("",!0)])),_:1}))])),_:1})])),_:1})])])),_:1})}}};var yl=a(69885),xl=a(44458),kl=a(63190),hl=a(24455),zl=a(20990),$l=a(50926),ql=a(29420),Ul=a(22857),Dl=a(32074),Wl=a(66663),Cl=a(396),jl=a(13119),Hl=a(62146),Ql=a(69984),Zl=a.n(Ql);const Sl=bl,Vl=Sl;Zl()(bl,"components",{QPage:yl.Z,QCard:xl.Z,QCardSection:kl.Z,QBtn:hl.Z,QBadge:zl.Z,QSeparator:$l.Z,QFile:ql.Z,QIcon:Ul.Z,QDialog:Dl.Z,QScrollArea:Wl.Z,QChatMessage:Cl.Z,QInput:jl.Z}),Zl()(bl,"directives",{ClosePopup:Hl.Z})}}]);